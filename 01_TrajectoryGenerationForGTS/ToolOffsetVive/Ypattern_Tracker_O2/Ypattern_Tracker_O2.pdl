PROGRAM Ypattern_Tracker_O2 HOLD
  -------------------------------------------------------------------------------
  -- Mohamed sadiq ikbal #msihub
  -- mohamedsadiq.ikbal@edu.unige.it
  -------------------------------------------------------------------------------
  -- Brief:
  -- Ypattern_Tracker_O2 trajectory batch input file
  -- Press Start button in teaching pendant to begin the execution
  -------------------------------------------------------------------------------

TYPE node_def1 = NODEDEF
		$MAIN_POS
		$MOVE_TYPE
	ENDNODEDEF

VAR
	pth1 : PATH OF node_def1 
	int_var : INTEGER
	trigger_on : BOOLEAN EXPORTED FROM mf
	trigger_off : BOOLEAN EXPORTED FROM mf

  -------------------------------------------------------------------------------  
  ------------------------------ MAIN FUNCTION ----------------------------------  
  -------------------------------------------------------------------------------  
BEGIN
	WRITE LUN_CRT (NL, '#######Motion program Ypattern_Tracker_O2 started...', NL)
	$PROG_CNFG :=2
	$ARM_SPD_OVR :=100
	$ARM_ACC_OVR :=100
	$ARM_DEC_OVR :=100
	$LIN_SPD :=1.5
	$ROT_SPD :=0.100
	$TERM_TYPE := FINE
	$UFRAME := POS(0, 0, 0, 0, 0, 0, ' ')
	$TOOL := POS(0.000000, 0.000000, 21.700000, 0.000000, 0.000000, 0.000000, ' ')


	WRITE LUN_CRT (NL, '#######Moving to starting point...', NL)
	MOVE TO POS(-821.8,-981.8,1600.0,-140.0, 90.0, 90.0,' ')

	NODE_APP(pth1,17)
	pth1.NODE[1].$MAIN_POS :=  POS(-821.8,-981.8,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[2].$MAIN_POS :=  POS(-821.8,-316.4,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[3].$MAIN_POS :=  POS(-643.6,-138.2,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[4].$MAIN_POS :=  POS(-465.4,-316.4,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[5].$MAIN_POS :=  POS(-465.4,-803.6,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[6].$MAIN_POS :=  POS(-287.2,-981.8,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[7].$MAIN_POS :=  POS(-109.0,-803.6,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[8].$MAIN_POS :=  POS(-109.0,-316.4,1600.0,-135.0, 90.0, 90.0,' ')
	pth1.NODE[9].$MAIN_POS :=  POS(69.2,-138.2,  1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[10].$MAIN_POS := POS(247.4,-316.4, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[11].$MAIN_POS := POS(247.4,-803.6, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[12].$MAIN_POS := POS(425.6,-981.8, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[13].$MAIN_POS := POS(603.8,-803.6, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[14].$MAIN_POS := POS(603.8,-316.4, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[15].$MAIN_POS := POS(782.0,-138.2, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[16].$MAIN_POS := POS(945.2,-316.4, 1600.0, -45.0, 90.0, 90.0,' ')
	pth1.NODE[17].$MAIN_POS := POS(945.2,-981.8, 1600.0, -45.0, 90.0, 90.0,' ')

	pth1.NODE[1].$MOVE_TYPE := LINEAR
	pth1.NODE[17].$MOVE_TYPE := LINEAR
	FOR int_var := 2 TO 16 DO
		pth1.NODE[int_var].$MOVE_TYPE := LINEAR
		int_var := int_var + 1
		pth1.NODE[int_var].$MOVE_TYPE := SEG_VIA
		int_var := int_var + 1
		pth1.NODE[int_var].$MOVE_TYPE := CIRCULAR
	ENDFOR

	trigger_on:= TRUE
	trigger_off:= FALSE

	WRITE LUN_CRT (NL, '#######Starting trajectory...', NL)
	MOVE ALONG pth1 WITH $SPD_OPT = SPD_LIN 
	CANCEL ALL
	NODE_DEL(pth1, 1, 17)

	trigger_on:= FALSE
	trigger_off:= TRUE
	WRITE LUN_CRT (NL, '#######Motion program Ypattern_Tracker_O2 end...', NL)

END Ypattern_Tracker_O2